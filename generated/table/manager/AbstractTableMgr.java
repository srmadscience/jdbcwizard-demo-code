package com.orindasoft.demo.generated.table.manager;


import java.sql.*; 
import com.orindasoft.pub.LogInterface; 
import com.orindasoft.pub.LongObjectLoader; 
import com.orindasoft.pub.OracleResourceUser; 
import com.orindasoft.pub.CSException; 
import com.orindasoft.pub.ReadOnlyRowSet; 
/** 
* Abstract table class used by all classes generated by JDBCWizard
* 
* <p>Generated by JDBCWizard build 2814 at 2011/11/22 00:33:33.574 GMT
* <p>JDBCWizard is made by <a href="http://www.orindasoft.com/?pdsrc=GD2814" target="_blank">Orinda Software Ltd, Dublin, Ireland</a>
* <p>Target Database: Oracle 10.2.0
* <p> -------------------------------------------------------------------------
* <p> WARNING: This code will stop working around the time JDBCWizard expires.
* <p> This restriction only exists in the demo version of JDBCWizard.
* <p> -------------------------------------------------------------------------
* <p> JDBCWizard Tips 9 of 19:
* <p> JDBCWizard generated code is compatible with Javadoc
* <p> -------------------------------------------------------------------------
* 
* <p>Copyright Orinda Software 2003-2009
* @author devteam60@orindabuild.com
* @version 1.1
*/ 
public abstract class AbstractTableMgr implements OracleResourceUser
{ 
  
  /**
  * Variable to store Buffer Size for file access.
  */
  protected int bufferSize = 4096;
  
  /**
  * Variable to store Long object loader.
  */
  protected LongObjectLoader objectLoader = new LongObjectLoader();
  
  /**
  * bfileGenerator - Create BFILE pointers when needed
  **/
  GenericTableBfileCreator bfileGenerator = null;
  
  /** 
  * Database Connection 
  */ 
  public Connection theConnection = null; 
  
  /** 
  * An instance of a class which implements com.orindasoft.pub.LogInterface 
  */ 
  public com.orindasoft.pub.LogInterface theLog = null; 
  
  /**
  * AbstractTableMgr - Abstract base class for tables
  * @param Connection theConnection
  * @param LogInterface theLog
  **/
  public AbstractTableMgr (Connection theConnection, LogInterface theLog) 
    { 
    this.theConnection = theConnection; 
    this.theLog = theLog; 
    } 
  
  /**
  * Set new file io buffer size
  * @param int bufferSize A new Buffer size in bytes.
  */
  public void setBufferSize(int bufferSize)
    {
    this.bufferSize = bufferSize;
    theLog.debug("bufferSize set to " + bufferSize);
    }
  /**
  * createBFILEPointer - Create BFILE Pointer Object
  * @param String bfileDirectoryName
  * @param String bfileFileName
  **/
  public oracle.sql.BFILE createBFILEPointer(String bfileDirectoryName, String bfileFileName) throws CSException
    { 
    if (bfileGenerator == null)
      { 
      bfileGenerator = new GenericTableBfileCreator(theConnection, theLog);
      bfileGenerator.setKeepLobs(true);
      }
     
    bfileGenerator.setParamBfileFileDir(bfileDirectoryName);
    bfileGenerator.setParamBfileFileName(bfileFileName);
    ReadOnlyRowSet bfileRowset = bfileGenerator.executeQuery();
    Object[] theRow = bfileRowset.getCurrentRow();
      
    // Perform a sanity check before reading the array
    if (theRow.length != 1)
      {
      throw new CSException("Unexpected failure in createBFILEPointer: BFILE Array is wrong length");
      }
      
    // If the parameters we gave were for a non-existent directory we'll have returned a CSException
    // instead of an oracle.sql.BFILE
    if (theRow[0] instanceof CSException)
      {
      throw((CSException)theRow[0]);
      }
     
    return((oracle.sql.BFILE)theRow[0]);
    }
  
  } // Generated by JDBCWizard 6.0.2814  
